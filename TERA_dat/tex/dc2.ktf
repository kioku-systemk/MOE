KTFS,15;F,128,128,128,64;E,0,0,0,255;D,3,5,14,0,0,0,"void CPMQO::EmittePhoton(CVector org,\n CVector dir){\n    static unsigned long cnt=0;\n    cnt++;\n    float x,z;\n    genrand(cnt,&x,&z); //Sphere direction\n    CVector rdir;\n    float theta =      PI * x;\n    float phi   = 2.0f*PI * z;\n    rdir.x = sinf(theta) * cosf(phi);	rdir.y = sinf(theta) * sinf(phi);\n    rdir.z = cosf(theta);\n    //consine\n    rdir += dir;\n    rdir.normalize();\n    PhotonHit(&photon_buffer[cnt],org,rdir\n      ,PHOTON_RECURSIVE_NUM);\n}";d;